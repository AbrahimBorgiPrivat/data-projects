{ "module_name": "libraries.packages.to_client",
  "function_name": "api_time_interval_to_client_upsert",
  
  "client":{"db_name": "CPH_AIRPORT_DB",
                "username": "POSTGRES_USERNAME",
                "password": "POSTGRES_PASSWORD",
                "server": "POSTGRES_HOST",
                "port":"POSTGRES_PORT",
                "db_type":"DB_TYPE"},
  "schema": "cph_airport",
  "table_name": "flights",
  "create_table_if_not_exist": true,
  "fields_dict": {"transaction_id":       { "type": "TEXT", "primary_key": true,  "autoincrement": false },
                  "flight_number":        { "type": "TEXT" },
                  "scheduled_utc":        { "type": "TIMESTAMP" },
                  "airline":              { "type": "TEXT" },
                  "airline_iata":         { "type": "TEXT" },
                  "airline_icao":         { "type": "TEXT" },
                  "destination":          { "type": "TEXT" },
                  "destination_iata":     { "type": "TEXT" },
                  "destination_icao":     { "type": "TEXT" },
                  "scheduled_local":      { "type": "TIMESTAMP" },
                  "revised_utc":          { "type": "TIMESTAMP" },
                  "revised_local":        { "type": "TIMESTAMP" },
                  "runway_utc":           { "type": "TIMESTAMP" },
                  "runway_local":         { "type": "TIMESTAMP" },
                  "status":               { "type": "TEXT" },
                  "terminal":             { "type": "TEXT" },
                  "gate":                 { "type": "TEXT" },
                  "aircraft_model":       { "type": "TEXT" },
                  "aircraft_reg":         { "type": "TEXT" }
                },
  "update_fields": ["flight_number",
                    "scheduled_utc",
                    "airline",
                    "airline_iata",
                    "airline_icao",
                    "destination",
                    "destination_iata",
                    "destination_icao",
                    "scheduled_local",
                    "revised_utc",
                    "revised_local",
                    "runway_utc",
                    "runway_local",
                    "status",
                    "terminal",
                    "gate",
                    "aircraft_model",
                    "aircraft_reg"
                  ],
  "not_included_in_update_fields": [],

  "base_url": "https://prod.api.market/api/v1/aedbx/aerodatabox/flights/airports",
    "headers": {
      "x-api-market-key": "API_MARKET_KEY",
      "accept": "application/json"
    },
    "endpoint_template": "Iata/CPH/{date_from}/{date_to}",
    "start_time": "2025-10-20T00:00:00",
    "days": 11,
    "interval_hours": 12,
    "params": {
      "direction": "Departure",
      "withLeg": "false",
      "withCancelled": "true",
      "withCodeshared": "true",
      "withCargo": "true",
      "withPrivate": "true",
      "withLocation": "false"
    },
    "response_handler": {
                          "path": "airport/api_to_client/response_handlers/flights_response_handler.py",
                          "func": "response_handler"
                        },
    "hash_id_name": "transaction_id",
    "hash_keys": ["flight_number", "airline_iata", "scheduled_utc", "gate", "terminal", "status"],
    "remove_duplicate": true
}
